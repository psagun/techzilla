{"version":3,"file":"react-query.mjs","sources":["../src/utils.js","../src/config.js","../src/queryCache.js","../src/setFocusHandler.js","../src/useIsFetching.js","../src/useMutation.js","../src/useBaseQuery.js","../src/useQuery.js","../src/usePaginatedQuery.js","../src/useInfiniteQuery.js"],"sourcesContent":["import React from 'react'\n\n//\n\nexport const statusIdle = 'idle'\nexport const statusLoading = 'loading'\nexport const statusError = 'error'\nexport const statusSuccess = 'success'\n\nlet _uid = 0\nexport const uid = () => _uid++\nexport const cancelledError = {}\nexport let globalStateListeners = []\nexport const isServer = typeof window === 'undefined'\nexport const noop = () => {}\nexport const identity = d => d\nexport let Console = console || { error: noop, warn: noop, log: noop }\n\nexport function useUid() {\n  const ref = React.useRef(null)\n\n  if (ref.current === null) {\n    ref.current = uid()\n  }\n\n  return ref.current\n}\n\nexport function setConsole(c) {\n  Console = c\n}\n\nexport function useGetLatest(obj) {\n  const ref = React.useRef()\n  ref.current = obj\n\n  return React.useCallback(() => ref.current, [])\n}\n\nexport function functionalUpdate(updater, old) {\n  return typeof updater === 'function' ? updater(old) : updater\n}\n\nexport function stableStringifyReplacer(_, value) {\n  return isObject(value)\n    ? Object.assign(\n        {},\n        ...Object.keys(value)\n          .sort()\n          .map(key => ({\n            [key]: value[key],\n          }))\n      )\n    : value\n}\n\nexport function stableStringify(obj) {\n  return JSON.stringify(obj, stableStringifyReplacer)\n}\n\nexport function isObject(a) {\n  return a && typeof a === 'object' && !Array.isArray(a)\n}\n\nexport function deepIncludes(a, b) {\n  if (a === b) {\n    return true\n  }\n\n  if (typeof a !== typeof b) {\n    return false\n  }\n\n  if (typeof a === 'object') {\n    return !Object.keys(b).some(key => !deepIncludes(a[key], b[key]))\n  }\n\n  return false\n}\n\nexport function isDocumentVisible() {\n  return (\n    typeof document === 'undefined' ||\n    document.visibilityState === undefined ||\n    document.visibilityState === 'visible' ||\n    document.visibilityState === 'prerender'\n  )\n}\n\nexport function isOnline() {\n  return navigator.onLine === undefined || navigator.onLine\n}\n\nexport function getQueryArgs(args) {\n  if (isObject(args[0])) {\n    if (\n      args[0].hasOwnProperty('queryKey') &&\n      args[0].hasOwnProperty('queryFn')\n    ) {\n      const { queryKey, variables = [], queryFn, config = {} } = args[0]\n      return [queryKey, variables, queryFn, config]\n    } else {\n      throw new Error('queryKey and queryFn keys are required.')\n    }\n  }\n\n  if (typeof args[2] === 'function') {\n    const [queryKey, variables = [], queryFn, config = {}] = args\n    return [queryKey, variables, queryFn, config]\n  }\n\n  const [queryKey, queryFn, config = {}] = args\n\n  return [queryKey, [], queryFn, config]\n}\n\nexport function useMountedCallback(callback) {\n  const mounted = React.useRef(false)\n  React[isServer ? 'useEffect' : 'useLayoutEffect'](() => {\n    mounted.current = true\n    return () => (mounted.current = false)\n  }, [])\n  return React.useCallback(\n    (...args) => (mounted.current ? callback(...args) : void 0),\n    [callback]\n  )\n}\n\nexport function handleSuspense(queryInfo) {\n  if (queryInfo.config.suspense || queryInfo.config.useErrorBoundary) {\n    if (queryInfo.status === statusError) {\n      setTimeout(() => {\n        queryInfo.query.state.status = 'loading'\n      })\n      throw queryInfo.error\n    }\n  }\n\n  if (queryInfo.config.suspense) {\n    if (queryInfo.status === statusLoading) {\n      queryInfo.query.wasSuspended = true\n      throw queryInfo.refetch()\n    }\n  }\n}\n\n// This deep-equal is directly based on https://github.com/epoberezkin/fast-deep-equal.\n// The parts for comparing any non-JSON-supported values has been removed\nexport function deepEqual(a, b) {\n  if (a === b) return true\n\n  if (a && b && typeof a == 'object' && typeof b == 'object') {\n    var length, i, keys\n    if (Array.isArray(a)) {\n      length = a.length\n      // eslint-disable-next-line eqeqeq\n      if (length != b.length) return false\n      for (i = length; i-- !== 0; ) if (!deepEqual(a[i], b[i])) return false\n      return true\n    }\n\n    if (a.valueOf !== Object.prototype.valueOf)\n      return a.valueOf() === b.valueOf()\n\n    keys = Object.keys(a)\n    length = keys.length\n    if (length !== Object.keys(b).length) return false\n\n    for (i = length; i-- !== 0; )\n      if (!Object.prototype.hasOwnProperty.call(b, keys[i])) return false\n\n    for (i = length; i-- !== 0; ) {\n      var key = keys[i]\n\n      if (!deepEqual(a[key], b[key])) return false\n    }\n\n    return true\n  }\n\n  // true if both NaN, false otherwise\n  // eslint-disable-next-line no-self-compare\n  return a !== a && b !== b\n}\n","import React from 'react'\nimport { noop, stableStringify, identity, deepEqual } from './utils'\n\nexport const configContext = React.createContext()\n\nconst DEFAULTS = {\n  retry: 3,\n  retryDelay: attemptIndex => Math.min(1000 * 2 ** attemptIndex, 30000),\n  staleTime: 0,\n  cacheTime: 5 * 60 * 1000,\n  refetchAllOnWindowFocus: true,\n  refetchInterval: false,\n  suspense: false,\n  queryKeySerializerFn: defaultQueryKeySerializerFn,\n  queryFnParamsFilter: identity,\n  throwOnError: false,\n  useErrorBoundary: undefined, // this will default to the suspense value\n  onMutate: noop,\n  onSuccess: noop,\n  onError: noop,\n  onSettled: noop,\n  refetchOnMount: true,\n  isDataEqual: deepEqual,\n}\n\nexport const defaultConfigRef = {\n  current: DEFAULTS,\n}\n\nexport function useConfigContext() {\n  return React.useContext(configContext) || defaultConfigRef.current\n}\n\nexport function ReactQueryConfigProvider({ config, children }) {\n  let configContextValue = React.useContext(configContext)\n\n  const newConfig = React.useMemo(() => {\n    const newConfig = {\n      ...(configContextValue || defaultConfigRef.current),\n      ...config,\n    }\n\n    // Default useErrorBoundary to the suspense value\n    if (typeof newConfig.useErrorBoundary === 'undefined') {\n      newConfig.useErrorBoundary = newConfig.suspense\n    }\n\n    return newConfig\n  }, [config, configContextValue])\n\n  React.useEffect(() => {\n    // restore previous config on unmount\n    return () => {\n      defaultConfigRef.current = { ...(configContextValue || DEFAULTS) }\n\n      // Default useErrorBoundary to the suspense value\n      if (typeof defaultConfigRef.current.useErrorBoundary === 'undefined') {\n        defaultConfigRef.current.useErrorBoundary =\n          defaultConfigRef.current.suspense\n      }\n    }\n  }, [configContextValue])\n\n  if (!configContextValue) {\n    defaultConfigRef.current = newConfig\n  }\n\n  return (\n    <configContext.Provider value={newConfig}>\n      {children}\n    </configContext.Provider>\n  )\n}\n\nexport function defaultQueryKeySerializerFn(queryKey) {\n  if (!queryKey) {\n    return []\n  }\n\n  if (typeof queryKey === 'function') {\n    try {\n      return defaultQueryKeySerializerFn(queryKey())\n    } catch {\n      return []\n    }\n  }\n\n  if (typeof queryKey === 'string') {\n    queryKey = [queryKey]\n  }\n\n  const queryHash = stableStringify(queryKey)\n  queryKey = JSON.parse(queryHash)\n\n  return [queryHash, queryKey]\n}\n","import React from 'react'\nimport {\n  isServer,\n  functionalUpdate,\n  cancelledError,\n  isDocumentVisible,\n  statusLoading,\n  statusSuccess,\n  statusError,\n  getQueryArgs,\n  deepIncludes,\n  noop,\n} from './utils'\nimport { defaultConfigRef } from './config'\n\nexport const queryCache = makeQueryCache()\n\nexport const queryCacheContext = React.createContext(queryCache)\n\nexport const queryCaches = [queryCache]\n\nexport function useQueryCache() {\n  return React.useContext(queryCacheContext)\n}\n\nexport function ReactQueryCacheProvider({ queryCache, children }) {\n  const cache = React.useMemo(() => queryCache || makeQueryCache(), [\n    queryCache,\n  ])\n\n  React.useEffect(() => {\n    queryCaches.push(cache)\n\n    return () => {\n      // remove the cache from the active list\n      const i = queryCaches.indexOf(cache)\n      if (i >= 0) {\n        queryCaches.splice(i, 1)\n      }\n      // if the cache was created by us, we need to tear it down\n      if (queryCache == null) {\n        cache.clear()\n      }\n    }\n  }, [cache, queryCache])\n\n  return (\n    <queryCacheContext.Provider value={cache}>\n      {children}\n    </queryCacheContext.Provider>\n  )\n}\n\nconst actionInit = {}\nconst actionFailed = {}\nconst actionMarkStale = {}\nconst actionMarkGC = {}\nconst actionFetch = {}\nconst actionSuccess = {}\nconst actionError = {}\nconst actionSetState = {}\n\nexport function makeQueryCache() {\n  const listeners = []\n\n  const cache = {\n    queries: {},\n    isFetching: 0,\n  }\n\n  const notifyGlobalListeners = () => {\n    cache.isFetching = Object.values(cache.queries).reduce(\n      (acc, query) => (query.state.isFetching ? acc + 1 : acc),\n      0\n    )\n    listeners.forEach(d => d(cache))\n  }\n\n  cache.subscribe = cb => {\n    listeners.push(cb)\n    return () => {\n      listeners.splice(listeners.indexOf(cb), 1)\n    }\n  }\n\n  cache.clear = () => {\n    Object.values(cache.queries).forEach(query => query.clear())\n    cache.queries = {}\n    notifyGlobalListeners()\n  }\n\n  const findQueries = (predicate, { exact } = {}) => {\n    if (typeof predicate !== 'function') {\n      const [\n        queryHash,\n        queryKey,\n      ] = defaultConfigRef.current.queryKeySerializerFn(predicate)\n      predicate = d =>\n        exact ? d.queryHash === queryHash : deepIncludes(d.queryKey, queryKey)\n    }\n\n    return Object.values(cache.queries).filter(predicate)\n  }\n\n  cache.getQueries = findQueries\n\n  cache.getQuery = queryKey => findQueries(queryKey, { exact: true })[0]\n\n  cache.getQueryData = queryKey => cache.getQuery(queryKey)?.state.data\n\n  cache.removeQueries = (predicate, { exact } = {}) => {\n    const foundQueries = findQueries(predicate, { exact })\n\n    foundQueries.forEach(query => {\n      clearTimeout(query.staleTimeout)\n      delete cache.queries[query.queryHash]\n    })\n\n    if (foundQueries.length) {\n      notifyGlobalListeners()\n    }\n  }\n\n  cache.cancelQueries = (predicate, { exact } = {}) => {\n    const foundQueries = findQueries(predicate, { exact })\n\n    foundQueries.forEach(query => {\n      query.cancel()\n    })\n\n    if (foundQueries.length) {\n      notifyGlobalListeners()\n    }\n  }\n\n  cache.refetchQueries = async (\n    predicate,\n    { exact, throwOnError, force } = {}\n  ) => {\n    const foundQueries =\n      predicate === true\n        ? Object.values(cache.queries)\n        : findQueries(predicate, { exact })\n\n    try {\n      return await Promise.all(\n        foundQueries.map(query => query.fetch({ force }))\n      )\n    } catch (err) {\n      if (throwOnError) {\n        throw err\n      }\n    }\n  }\n\n  cache._buildQuery = (userQueryKey, queryVariables, queryFn, config) => {\n    let [queryHash, queryKey] = config.queryKeySerializerFn(userQueryKey)\n\n    let query = cache.queries[queryHash]\n\n    if (query) {\n      Object.assign(query, { queryVariables, queryFn })\n      query.config = { ...query.config, ...config }\n    } else {\n      query = makeQuery({\n        cache,\n        queryKey,\n        queryHash,\n        queryVariables,\n        queryFn,\n        config,\n      })\n\n      // If the query started with data, schedule\n      // a stale timeout\n      if (!isServer && query.state.data) {\n        query.scheduleStaleTimeout()\n\n        // Simulate a query healing process\n        query.heal()\n        // Schedule for garbage collection in case\n        // nothing subscribes to this query\n        query.scheduleGarbageCollection()\n      }\n\n      if (query.queryHash) {\n        if (!isServer) {\n          cache.queries[queryHash] = query\n          // Here, we setTimeout so as to not trigger\n          // any setState's in parent components in the\n          // middle of the render phase.\n          setTimeout(() => {\n            notifyGlobalListeners()\n          })\n        }\n      }\n    }\n\n    return query\n  }\n\n  cache.prefetchQuery = async (...args) => {\n    let [\n      queryKey,\n      queryVariables,\n      queryFn,\n      { force, ...config },\n    ] = getQueryArgs(args)\n\n    config = {\n      ...defaultConfigRef.current,\n      ...config,\n    }\n\n    const query = cache._buildQuery(queryKey, queryVariables, queryFn, config)\n\n    // Don't prefetch queries that are fresh, unless force is passed\n    if (query.state.isStale || force) {\n      // Trigger a fetch and return the promise\n      try {\n        const res = await query.fetch({ force })\n        query.wasPrefetched = true\n        return res\n      } catch (err) {\n        if (config.throwOnError) {\n          throw err\n        }\n      }\n    }\n\n    return query.state.data\n  }\n\n  cache.setQueryData = (queryKey, updater, { exact, ...config } = {}) => {\n    let queries = findQueries(queryKey, { exact })\n\n    if (!queries.length && typeof queryKey !== 'function') {\n      queries = [\n        cache._buildQuery(queryKey, undefined, () => Promise.resolve(), {\n          ...defaultConfigRef.current,\n          ...config,\n        }),\n      ]\n    }\n\n    queries.forEach(d => d.setData(updater))\n  }\n\n  function makeQuery(options) {\n    const queryCache = options.cache\n    const reducer = options.config.queryReducer || defaultQueryReducer\n\n    const noQueryHash = typeof options.queryHash === 'undefined'\n\n    const initialData =\n      typeof options.config.initialData === 'function'\n        ? options.config.initialData()\n        : options.config.initialData\n\n    const hasInitialData = typeof initialData !== 'undefined'\n\n    const isStale = noQueryHash ? true : !hasInitialData\n\n    const manual = options.config.manual\n\n    const initialStatus =\n      noQueryHash || manual || hasInitialData ? statusSuccess : statusLoading\n\n    const query = {\n      ...options,\n      instances: [],\n      state: reducer(undefined, {\n        type: actionInit,\n        initialStatus,\n        initialData,\n        hasInitialData,\n        isStale,\n        manual,\n      }),\n    }\n\n    const dispatch = action => {\n      query.state = reducer(query.state, action)\n      query.instances.forEach(d => d.onStateUpdate(query.state))\n      notifyGlobalListeners()\n    }\n\n    query.scheduleStaleTimeout = () => {\n      if (query.config.staleTime === Infinity) {\n        return\n      }\n      query.staleTimeout = setTimeout(() => {\n        if (queryCache.getQuery(query.queryKey)) {\n          dispatch({ type: actionMarkStale })\n        }\n      }, query.config.staleTime)\n    }\n\n    query.scheduleGarbageCollection = () => {\n      if (query.config.cacheTime === Infinity) {\n        return\n      }\n      dispatch({ type: actionMarkGC })\n      query.cacheTimeout = setTimeout(\n        () => {\n          cache.removeQueries(\n            d =>\n              d.state.markedForGarbageCollection &&\n              d.queryHash === query.queryHash\n          )\n        },\n        typeof query.state.data === 'undefined' &&\n          query.state.status !== 'error'\n          ? 0\n          : query.config.cacheTime\n      )\n    }\n\n    query.heal = () => {\n      // Stop the query from being garbage collected\n      clearTimeout(query.cacheTimeout)\n\n      // Mark the query as not cancelled\n      query.cancelled = null\n    }\n\n    query.cancel = () => {\n      query.cancelled = cancelledError\n\n      if (query.cancelPromises) {\n        query.cancelPromises()\n      }\n\n      delete query.promise\n\n      notifyGlobalListeners()\n    }\n\n    query.updateInstance = instance => {\n      let found = query.instances.find(d => d.id === instance.id)\n\n      if (found) {\n        Object.assign(found, instance)\n      } else {\n        found = {\n          onStateUpdate: noop,\n          ...instance,\n        }\n        query.instances.push(instance)\n      }\n    }\n\n    query.subscribe = instanceId => {\n      query.heal()\n\n      // Return the unsubscribe function\n      return () => {\n        query.instances = query.instances.filter(d => d.id !== instanceId)\n\n        if (!query.instances.length) {\n          query.cancel()\n\n          // Schedule garbage collection\n          query.scheduleGarbageCollection()\n        }\n      }\n    }\n\n    // Set up the fetch function\n    const tryFetchData = async (queryFn, ...args) => {\n      try {\n        // Perform the query\n        const promise = queryFn(...query.config.queryFnParamsFilter(args))\n\n        query.cancelPromises = () => promise.cancel?.()\n\n        const data = await promise\n        delete query.shouldContinueRetryOnFocus\n\n        delete query.cancelPromises\n        if (query.cancelled) throw query.cancelled\n\n        return data\n      } catch (error) {\n        delete query.cancelPromises\n        if (query.cancelled) throw query.cancelled\n\n        // If we fail, increase the failureCount\n        dispatch({ type: actionFailed })\n\n        // Do we need to retry the request?\n        if (\n          query.config.retry === true ||\n          query.state.failureCount <= query.config.retry ||\n          (typeof query.config.retry === 'function' &&\n            query.config.retry(query.state.failureCount, error))\n        ) {\n          // Only retry if the document is visible\n          if (!isDocumentVisible()) {\n            // set this flag to continue fetch retries on focus\n            query.shouldContinueRetryOnFocus = true\n            return new Promise(noop)\n          }\n\n          delete query.shouldContinueRetryOnFocus\n\n          // Determine the retryDelay\n          const delay = functionalUpdate(\n            query.config.retryDelay,\n            query.state.failureCount\n          )\n\n          // Return a new promise with the retry\n          return await new Promise((resolve, reject) => {\n            // Keep track of the retry timeout\n            setTimeout(async () => {\n              if (query.cancelled) return reject(query.cancelled)\n\n              try {\n                const data = await tryFetchData(queryFn, ...args)\n                if (query.cancelled) return reject(query.cancelled)\n                resolve(data)\n              } catch (error) {\n                if (query.cancelled) return reject(query.cancelled)\n                reject(error)\n              }\n            }, delay)\n          })\n        }\n\n        throw error\n      }\n    }\n\n    query.fetch = async ({ force, __queryFn = query.queryFn } = {}) => {\n      // Don't refetch fresh queries that don't have a queryHash\n\n      if (!query.queryHash || (!query.state.isStale && !force)) {\n        return\n      }\n\n      // Create a new promise for the query cache if necessary\n      if (!query.promise) {\n        query.promise = (async () => {\n          // If there are any retries pending for this query, kill them\n          query.cancelled = null\n\n          const callbackInstances = [...query.instances]\n\n          if (query.wasSuspended) {\n            callbackInstances.unshift(query.suspenseInstance)\n          }\n\n          try {\n            // Set up the query refreshing state\n            dispatch({ type: actionFetch })\n\n            // Try to fetch\n            let data = await tryFetchData(\n              __queryFn,\n              ...query.queryKey,\n              ...query.queryVariables\n            )\n\n            query.setData(old =>\n              query.config.isDataEqual(old, data) ? old : data\n            )\n\n            callbackInstances.forEach(\n              instance =>\n                instance.onSuccess && instance.onSuccess(query.state.data)\n            )\n\n            callbackInstances.forEach(\n              instance =>\n                instance.onSettled && instance.onSettled(query.state.data, null)\n            )\n\n            delete query.promise\n\n            return data\n          } catch (error) {\n            dispatch({\n              type: actionError,\n              cancelled: error === query.cancelled,\n              error,\n            })\n\n            delete query.promise\n\n            if (error !== query.cancelled) {\n              callbackInstances.forEach(\n                instance => instance.onError && instance.onError(error)\n              )\n\n              callbackInstances.forEach(\n                instance =>\n                  instance.onSettled && instance.onSettled(undefined, error)\n              )\n\n              throw error\n            }\n          }\n        })()\n      }\n\n      return query.promise\n    }\n\n    query.setState = updater => dispatch({ type: actionSetState, updater })\n\n    query.setData = updater => {\n      // Set data and mark it as cached\n      dispatch({ type: actionSuccess, updater })\n\n      // Schedule a fresh invalidation!\n      clearTimeout(query.staleTimeout)\n      query.scheduleStaleTimeout()\n    }\n\n    query.clear = () => {\n      clearTimeout(query.staleTimeout)\n      clearTimeout(query.cacheTimeout)\n      query.cancel()\n    }\n\n    return query\n  }\n\n  return cache\n}\n\nexport function defaultQueryReducer(state, action) {\n  switch (action.type) {\n    case actionInit:\n      return {\n        status: action.initialStatus,\n        error: null,\n        isFetching:\n          action.hasInitialData || action.manual\n            ? false\n            : action.initialStatus === 'loading',\n        canFetchMore: false,\n        failureCount: 0,\n        isStale: action.isStale,\n        markedForGarbageCollection: false,\n        data: action.initialData,\n        updatedAt: action.hasInitialData ? Date.now() : 0,\n      }\n    case actionFailed:\n      return {\n        ...state,\n        failureCount: state.failureCount + 1,\n      }\n    case actionMarkStale:\n      return {\n        ...state,\n        isStale: true,\n      }\n    case actionMarkGC: {\n      return {\n        ...state,\n        markedForGarbageCollection: true,\n      }\n    }\n    case actionFetch:\n      return {\n        ...state,\n        status: state.status === statusError ? statusLoading : state.status,\n        isFetching: true,\n        failureCount: 0,\n      }\n    case actionSuccess:\n      return {\n        ...state,\n        status: statusSuccess,\n        data: functionalUpdate(action.updater, state.data),\n        error: null,\n        isStale: false,\n        isFetching: false,\n        canFetchMore: action.canFetchMore,\n        updatedAt: Date.now(),\n        failureCount: 0,\n      }\n    case actionError:\n      return {\n        ...state,\n        isFetching: false,\n        isStale: true,\n        ...(!action.cancelled && {\n          status: statusError,\n          error: action.error,\n        }),\n      }\n    case actionSetState:\n      return functionalUpdate(action.updater, state)\n    default:\n      throw new Error()\n  }\n}\n","import { isOnline, isDocumentVisible, Console, isServer } from './utils'\nimport { defaultConfigRef } from './config'\nimport { queryCaches } from './queryCache'\n\nconst visibilityChangeEvent = 'visibilitychange'\nconst focusEvent = 'focus'\n\nconst onWindowFocus = () => {\n  const { refetchAllOnWindowFocus } = defaultConfigRef.current\n\n  if (isDocumentVisible() && isOnline()) {\n    queryCaches.forEach(queryCache =>\n      queryCache\n        .refetchQueries(query => {\n          if (!query.instances.length) {\n            return false\n          }\n\n          if (query.config.manual === true) {\n            return false\n          }\n\n          if (query.shouldContinueRetryOnFocus) {\n            // delete promise, so `fetch` will create new one\n            delete query.promise\n            return true\n          }\n\n          if (typeof query.config.refetchOnWindowFocus === 'undefined') {\n            return refetchAllOnWindowFocus\n          } else {\n            return query.config.refetchOnWindowFocus\n          }\n        })\n        .catch(Console.error)\n    )\n  }\n}\n\nlet removePreviousHandler\n\nexport function setFocusHandler(callback) {\n  // Unsub the old watcher\n  if (removePreviousHandler) {\n    removePreviousHandler()\n  }\n  // Sub the new watcher\n  removePreviousHandler = callback(onWindowFocus)\n}\n\nsetFocusHandler(handleFocus => {\n  // Listen to visibillitychange and focus\n  if (!isServer && window?.addEventListener) {\n    window.addEventListener(visibilityChangeEvent, handleFocus, false)\n    window.addEventListener(focusEvent, handleFocus, false)\n\n    return () => {\n      // Be sure to unsubscribe if a new handler is set\n      window.removeEventListener(visibilityChangeEvent, handleFocus)\n      window.removeEventListener(focusEvent, handleFocus)\n    }\n  }\n})\n","import React from 'react'\n\nimport { useQueryCache } from './queryCache'\n\nexport function useIsFetching() {\n  const queryCache = useQueryCache()\n  const [state, setState] = React.useState({})\n\n  React.useEffect(() => {\n    return queryCache.subscribe(() => setState({}))\n  }, [])\n\n  return React.useMemo(() => state && queryCache.isFetching, [state])\n}\n","import React from 'react'\n\n//\n\nimport { useConfigContext } from './config'\nimport {\n  statusIdle,\n  statusLoading,\n  statusSuccess,\n  statusError,\n  useGetLatest,\n  Console,\n  uid,\n  useMountedCallback,\n  noop,\n} from './utils'\n\nconst getDefaultState = () => ({\n  status: statusIdle,\n  data: undefined,\n  error: null,\n})\n\nconst actionReset = {}\nconst actionLoading = {}\nconst actionResolve = {}\nconst actionReject = {}\n\nfunction mutationReducer(state, action) {\n  if (action.type === actionReset) {\n    return getDefaultState()\n  }\n  if (action.type === actionLoading) {\n    return {\n      status: statusLoading,\n    }\n  }\n  if (action.type === actionResolve) {\n    return {\n      status: statusSuccess,\n      data: action.data,\n    }\n  }\n  if (action.type === actionReject) {\n    return {\n      status: statusError,\n      error: action.error,\n    }\n  }\n  throw new Error()\n}\n\nexport function useMutation(mutationFn, config = {}) {\n  const [state, unsafeDispatch] = React.useReducer(\n    mutationReducer,\n    null,\n    getDefaultState\n  )\n\n  const dispatch = useMountedCallback(unsafeDispatch)\n\n  const getMutationFn = useGetLatest(mutationFn)\n\n  const getConfig = useGetLatest({\n    ...useConfigContext(),\n    ...config,\n  })\n\n  const latestMutationRef = React.useRef()\n\n  const mutate = React.useCallback(\n    async (\n      variables,\n      { onSuccess = noop, onError = noop, onSettled = noop, throwOnError } = {}\n    ) => {\n      const config = getConfig()\n\n      const mutationId = uid()\n      latestMutationRef.current = mutationId\n\n      const isLatest = () => latestMutationRef.current === mutationId\n\n      dispatch({ type: actionLoading })\n\n      let snapshotValue\n\n      try {\n        snapshotValue = await config.onMutate(variables)\n\n        let data\n\n        if (isLatest()) {\n          data = await getMutationFn()(variables)\n        }\n\n        if (isLatest()) {\n          await onSuccess(data, variables)\n        }\n\n        if (isLatest()) {\n          await config.onSuccess(data, variables)\n        }\n\n        if (isLatest()) {\n          await onSettled(data, null, variables)\n        }\n\n        if (isLatest()) {\n          await config.onSettled(data, null, variables)\n        }\n\n        if (isLatest()) {\n          dispatch({ type: actionResolve, data })\n        }\n\n        return data\n      } catch (error) {\n        if (isLatest()) {\n          Console.error(error)\n          await onError(error, variables, snapshotValue)\n        }\n\n        if (isLatest()) {\n          await config.onError(error, variables, snapshotValue)\n        }\n\n        if (isLatest()) {\n          await onSettled(undefined, error, variables, snapshotValue)\n        }\n\n        if (isLatest()) {\n          await config.onSettled(undefined, error, variables, snapshotValue)\n        }\n\n        if (isLatest()) {\n          dispatch({ type: actionReject, error })\n\n          if (throwOnError ?? config.throwOnError) {\n            throw error\n          }\n        }\n      }\n    },\n    [dispatch, getConfig, getMutationFn]\n  )\n\n  const reset = React.useCallback(() => dispatch({ type: actionReset }), [\n    dispatch,\n  ])\n\n  React.useEffect(() => {\n    if (getConfig().useErrorBoundary && state.error) {\n      throw state.error\n    }\n  }, [getConfig, state.error])\n\n  return [mutate, { ...state, reset }]\n}\n","import React from 'react'\n\n//\n\nimport { useQueryCache } from './queryCache'\nimport { useConfigContext } from './config'\nimport {\n  useUid,\n  isDocumentVisible,\n  Console,\n  useGetLatest,\n  useMountedCallback,\n} from './utils'\n\nexport function useBaseQuery(queryKey, queryVariables, queryFn, config = {}) {\n  const instanceId = useUid()\n\n  config = {\n    ...useConfigContext(),\n    ...config,\n  }\n\n  const queryCache = useQueryCache()\n\n  const queryRef = React.useRef()\n\n  const newQuery = queryCache._buildQuery(\n    queryKey,\n    queryVariables,\n    queryFn,\n    config\n  )\n\n  const useCachedQuery =\n    queryRef.current &&\n    typeof queryRef.current.queryHash === 'undefined' &&\n    typeof newQuery.queryHash === 'undefined'\n\n  // Do not use new query with undefined queryHash, if previous query also had undefined queryHash.\n  // Otherwise this will cause infinite loop.\n  if (!useCachedQuery) {\n    queryRef.current = newQuery\n  }\n\n  const query = queryRef.current\n\n  const [, unsafeRerender] = React.useState()\n\n  const rerender = useMountedCallback(unsafeRerender)\n\n  const getLatestConfig = useGetLatest(config)\n  const refetch = React.useCallback(\n    async ({ throwOnError, ...rest } = {}) => {\n      try {\n        return await query.fetch(rest)\n      } catch (err) {\n        if (throwOnError) {\n          throw err\n        }\n      }\n    },\n    [query]\n  )\n\n  query.suspenseInstance = {\n    onSuccess: data => getLatestConfig().onSuccess(data),\n    onError: err => getLatestConfig().onError(err),\n    onSettled: (data, err) => getLatestConfig().onSettled(data, err),\n  }\n\n  // After mount, subscribe to the query\n  React.useEffect(() => {\n    // Update the instance to the query again, but not as a placeholder\n    query.updateInstance({\n      id: instanceId,\n      onStateUpdate: () => rerender({}),\n      onSuccess: data => getLatestConfig().onSuccess(data),\n      onError: err => getLatestConfig().onError(err),\n      onSettled: (data, err) => getLatestConfig().onSettled(data, err),\n    })\n\n    return query.subscribe(instanceId)\n  }, [getLatestConfig, instanceId, query, rerender])\n\n  React.useEffect(() => {\n    // Perform the initial fetch for this query if necessary\n    if (\n      !getLatestConfig().manual && // Don't auto fetch if config is set to manual query\n      !query.wasPrefetched && // Don't double fetch for prefetched queries\n      !query.wasSuspended && // Don't double fetch for suspense\n      query.state.isStale && // Only refetch if stale\n      (getLatestConfig().refetchOnMount || query.instances.length === 1)\n    ) {\n      refetch().catch(Console.error)\n    }\n\n    query.wasPrefetched = false\n    query.wasSuspended = false\n  }, [getLatestConfig, query, refetch])\n\n  // Handle refetch interval\n  React.useEffect(() => {\n    const query = queryRef.current\n    if (\n      config.refetchInterval &&\n      (!query.currentRefetchInterval ||\n        // shorter interval should override previous one\n        config.refetchInterval < query.currentRefetchInterval)\n    ) {\n      query.currentRefetchInterval = config.refetchInterval\n      clearInterval(query.refetchIntervalId)\n      query.refetchIntervalId = setInterval(() => {\n        if (isDocumentVisible() || config.refetchIntervalInBackground) {\n          refetch().catch(Console.error)\n        }\n      }, config.refetchInterval)\n\n      return () => {\n        clearInterval(query.refetchIntervalId)\n        delete query.refetchIntervalId\n        delete query.currentRefetchInterval\n      }\n    }\n  }, [config.refetchInterval, config.refetchIntervalInBackground, refetch])\n\n  return {\n    ...query.state,\n    config,\n    query,\n    refetch,\n  }\n}\n","import { useBaseQuery } from './useBaseQuery'\nimport { getQueryArgs, handleSuspense } from './utils'\n\nexport function useQuery(...args) {\n  const query = useBaseQuery(...getQueryArgs(args))\n\n  handleSuspense(query)\n\n  return query\n}\n","import React from 'react'\n\n//\n\nimport { useBaseQuery } from './useBaseQuery'\nimport { getQueryArgs, handleSuspense } from './utils'\n\nexport function usePaginatedQuery(...args) {\n  let [queryKey, queryVariables, queryFn, config = {}] = getQueryArgs(args)\n\n  const lastDataRef = React.useRef()\n\n  if (!queryKey) {\n    lastDataRef.current = undefined\n  }\n\n  // If latestData is set, don't use initialData\n  if (typeof lastDataRef.current !== 'undefined') {\n    delete config.initialData\n  }\n\n  const query = useBaseQuery(queryKey, queryVariables, queryFn, config)\n\n  let { data: latestData, status } = query\n\n  React.useEffect(() => {\n    if (status === 'success' && typeof latestData !== 'undefined') {\n      lastDataRef.current = latestData\n    }\n  }, [latestData, status])\n\n  let resolvedData = latestData\n\n  if (typeof resolvedData === 'undefined') {\n    resolvedData = lastDataRef.current\n  }\n\n  if (typeof resolvedData !== 'undefined') {\n    status = 'success'\n  }\n\n  const paginatedQuery = {\n    ...query,\n    resolvedData,\n    latestData,\n    status,\n  }\n\n  handleSuspense(paginatedQuery)\n\n  return paginatedQuery\n}\n","import React from 'react'\n\n//\n\nimport { useBaseQuery } from './useBaseQuery'\nimport { getQueryArgs, useGetLatest, handleSuspense } from './utils'\n\nexport function useInfiniteQuery(...args) {\n  const queryInfoRef = React.useRef()\n  let [queryKey, queryVariables, queryFn, config = {}] = getQueryArgs(args)\n\n  const { getFetchMore } = config\n  const getGetFetchMore = useGetLatest(getFetchMore)\n\n  // The default queryFn will query all pages and map them together\n  const originalQueryFn = queryFn\n\n  queryFn = async () => {\n    const data = []\n    const pageVariables = [...queryInfoRef.current.query.pageVariables]\n    const rebuiltPageVariables = []\n\n    do {\n      const args = pageVariables.shift()\n\n      if (!data.length) {\n        // the first page query doesn't need to be rebuilt\n        data.push(await originalQueryFn(...args))\n        rebuiltPageVariables.push(args)\n      } else {\n        // get an up-to-date cursor based on the previous data set\n        const nextCursor = getGetFetchMore()(data[data.length - 1], data)\n\n        // break early if there's no next cursor\n        // otherwise we'll start from the beginning\n        // which will cause unwanted duplication\n        if (!nextCursor) {\n          break\n        }\n\n        const pageArgs = [\n          // remove the last argument (the previously saved cursor)\n          ...args.slice(0, -1),\n          nextCursor,\n        ]\n\n        data.push(await originalQueryFn(...pageArgs))\n        rebuiltPageVariables.push(pageArgs)\n      }\n    } while (pageVariables.length)\n\n    queryInfoRef.current.query.canFetchMore = getGetFetchMore()(\n      data[data.length - 1],\n      data\n    )\n    queryInfoRef.current.query.pageVariables = rebuiltPageVariables\n\n    return data\n  }\n\n  const queryInfo = useBaseQuery(queryKey, queryVariables, queryFn, config)\n\n  if (\n    typeof queryInfo.query.canFetchMore === 'undefined' &&\n    typeof queryInfo.data !== 'undefined'\n  ) {\n    queryInfo.query.canFetchMore = getGetFetchMore()(\n      queryInfo.data[queryInfo.data.length - 1],\n      queryInfo.data\n    )\n  }\n\n  queryInfoRef.current = queryInfo\n\n  let {\n    refetch,\n    data = [],\n    query: { canFetchMore },\n  } = queryInfo\n\n  // Here we seed the pageVariabes for the query\n  if (!queryInfo.query.pageVariables) {\n    queryInfo.query.pageVariables = [\n      [...queryInfo.query.queryKey, ...queryInfo.query.queryVariables],\n    ]\n  }\n\n  const fetchMore = React.useCallback(\n    (fetchMoreInfo = queryInfoRef.current.query.canFetchMore) =>\n      queryInfoRef.current.query.canFetchMore\n        ? refetch({\n            force: true,\n            __queryFn: async (...args) => {\n              try {\n                queryInfoRef.current.query.setState(old => ({\n                  ...old,\n                  isFetchingMore: true,\n                }))\n\n                const newArgs = [...args, fetchMoreInfo]\n                queryInfoRef.current.query.pageVariables.push(newArgs)\n\n                const data = [\n                  ...queryInfoRef.current.data,\n                  await originalQueryFn(...newArgs),\n                ]\n\n                queryInfoRef.current.query.canFetchMore = getGetFetchMore()(\n                  data[data.length - 1],\n                  data\n                )\n\n                return data\n              } finally {\n                queryInfoRef.current.query.setState(old => ({\n                  ...old,\n                  isFetchingMore: false,\n                }))\n              }\n            },\n          })\n        : void 0,\n    [getGetFetchMore, originalQueryFn, refetch]\n  )\n\n  handleSuspense(queryInfo)\n\n  return {\n    ...queryInfo,\n    data,\n    canFetchMore,\n    fetchMore,\n  }\n}\n"],"names":["statusIdle","statusLoading","statusError","statusSuccess","_uid","uid","cancelledError","isServer","window","noop","identity","d","Console","console","error","warn","log","useUid","ref","React","useRef","current","setConsole","c","useGetLatest","obj","useCallback","functionalUpdate","updater","old","stableStringifyReplacer","_","value","isObject","Object","assign","keys","sort","map","key","stableStringify","JSON","stringify","a","Array","isArray","deepIncludes","b","some","isDocumentVisible","document","visibilityState","undefined","isOnline","navigator","onLine","getQueryArgs","args","hasOwnProperty","queryKey","variables","queryFn","config","Error","useMountedCallback","callback","mounted","handleSuspense","queryInfo","suspense","useErrorBoundary","status","setTimeout","query","state","wasSuspended","refetch","deepEqual","length","i","valueOf","prototype","call","configContext","createContext","DEFAULTS","retry","retryDelay","attemptIndex","Math","min","staleTime","cacheTime","refetchAllOnWindowFocus","refetchInterval","queryKeySerializerFn","defaultQueryKeySerializerFn","queryFnParamsFilter","throwOnError","onMutate","onSuccess","onError","onSettled","refetchOnMount","isDataEqual","defaultConfigRef","useConfigContext","useContext","ReactQueryConfigProvider","children","configContextValue","newConfig","useMemo","useEffect","queryHash","parse","then","direct","Promise","resolve","body","recover","result","e","f","arguments","apply","reject","queryCache","makeQueryCache","queryCacheContext","queryCaches","useQueryCache","ReactQueryCacheProvider","cache","push","indexOf","splice","clear","actionInit","actionFailed","actionMarkStale","actionMarkGC","actionFetch","actionSuccess","actionError","actionSetState","listeners","queries","isFetching","notifyGlobalListeners","values","reduce","acc","forEach","subscribe","cb","findQueries","predicate","exact","filter","getQueries","getQuery","getQueryData","data","removeQueries","foundQueries","clearTimeout","staleTimeout","cancelQueries","cancel","refetchQueries","force","all","fetch","err","_buildQuery","userQueryKey","queryVariables","makeQuery","scheduleStaleTimeout","heal","scheduleGarbageCollection","prefetchQuery","isStale","res","wasPrefetched","setQueryData","setData","options","reducer","queryReducer","defaultQueryReducer","noQueryHash","initialData","hasInitialData","manual","initialStatus","instances","type","dispatch","action","onStateUpdate","Infinity","cacheTimeout","markedForGarbageCollection","cancelled","cancelPromises","promise","updateInstance","instance","found","find","id","instanceId","tryFetchData","shouldContinueRetryOnFocus","failureCount","delay","__queryFn","callbackInstances","unshift","suspenseInstance","setState","canFetchMore","updatedAt","Date","now","visibilityChangeEvent","focusEvent","onWindowFocus","refetchOnWindowFocus","catch","removePreviousHandler","setFocusHandler","handleFocus","addEventListener","removeEventListener","useIsFetching","useState","_await","getDefaultState","_empty","actionReset","_awaitIgnored","actionLoading","_invoke","actionResolve","_catch","actionReject","mutationReducer","useMutation","mutationFn","useReducer","unsafeDispatch","getMutationFn","getConfig","latestMutationRef","mutate","mutationId","isLatest","snapshotValue","reset","useBaseQuery","queryRef","newQuery","useCachedQuery","unsafeRerender","rerender","getLatestConfig","rest","currentRefetchInterval","clearInterval","refetchIntervalId","setInterval","refetchIntervalInBackground","useQuery","usePaginatedQuery","lastDataRef","latestData","resolvedData","paginatedQuery","pact","s","v","o","bind","observer","onFulfilled","onRejected","_this","thenable","test","awaitBody","shouldContinue","_resumeAfterBody","_resumeAfterTest","thrown","finalizer","useInfiniteQuery","queryInfoRef","getFetchMore","getGetFetchMore","originalQueryFn","pageVariables","rebuiltPageVariables","shift","nextCursor","pageArgs","slice","fetchMore","fetchMoreInfo","isFetchingMore","newArgs"],"mappings":"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"}