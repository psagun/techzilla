import e from"react";function r(){return(r=Object.assign||function(e){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e}).apply(this,arguments)}function t(e,r){if(null==e)return{};var t,n,u={},o=Object.keys(e);for(n=0;n<o.length;n++)t=o[n],r.indexOf(t)>=0||(u[t]=e[t]);return u}const n=function(){function e(){}return e.prototype.then=function(r,t){const n=new e,o=this.s;if(o){const e=1&o?r:t;if(e){try{u(n,1,e(this.v))}catch(e){u(n,2,e)}return n}return this}return this.o=function(e){try{const o=e.v;1&e.s?u(n,1,r?r(o):o):t?u(n,1,t(o)):u(n,2,o)}catch(e){u(n,2,e)}},n},e}();function u(e,r,t){if(!e.s){if(t instanceof n){if(!t.s)return void(t.o=u.bind(null,e,r));1&r&&(r=t.s),t=t.v}if(t&&t.then)return void t.then(u.bind(null,e,r),u.bind(null,e,2));e.s=r,e.v=t;const o=e.o;o&&o(e)}}function o(e){return e instanceof n&&1&e.s}function i(e){return function(){for(var r=[],t=0;t<arguments.length;t++)r[t]=arguments[t];try{return Promise.resolve(e.apply(this,r))}catch(e){return Promise.reject(e)}}}function c(e,r,t){return t?r?r(e):e:(e&&e.then||(e=Promise.resolve(e)),r?e.then(r):e)}function a(e,r){if(!r)return e&&e.then?e.then(p):Promise.resolve()}function f(e,r){return e&&e.then?e.then(r):r(e)}"undefined"!=typeof Symbol&&(Symbol.iterator||(Symbol.iterator=Symbol("Symbol.iterator"))),"undefined"!=typeof Symbol&&(Symbol.asyncIterator||(Symbol.asyncIterator=Symbol("Symbol.asyncIterator")));function s(e,r){var t;do{var i=e();if(i&&i.then){if(!o(i)){t=!0;break}i=i.v}var c=r();if(o(c)&&(c=c.v),!c)return i}while(!c.then);const a=new n,f=u.bind(null,a,2);return(t?i.then(s):c.then(l)).then(void 0,f),a;function s(t){for(i=t;o(c=r())&&(c=c.v),c;){if(c.then)return void c.then(l).then(void 0,f);if((i=e())&&i.then){if(!o(i))return void i.then(s).then(void 0,f);i=i.v}}u(a,1,i)}function l(t){if(t){do{if((i=e())&&i.then){if(!o(i))return void i.then(s).then(void 0,f);i=i.v}if(o(t=r())&&(t=t.v),!t)return void u(a,1,i)}while(!t.then);t.then(l).then(void 0,f)}else u(a,1,i)}}function l(e,r){var t=e();return t&&t.then?t.then(r):r(t)}function d(e){var r=e();if(r&&r.then)return r.then(p)}function h(e,r){try{var t=e()}catch(e){return r(e)}return t&&t.then?t.then(void 0,r):t}function v(e,r){try{var t=e()}catch(e){return r(!0,e)}return t&&t.then?t.then(r.bind(null,!1),r.bind(null,!0)):r(!1,t)}function y(e,r){if(e)throw r;return r}function p(){}var g="idle",m="loading",b="error",w="success",q=0,S=function(){return q++},E={},F="undefined"==typeof window,O=function(){},I=console||{error:O,warn:O,log:O};function C(e){I=e}function T(r){var t=e.useRef();return t.current=r,e.useCallback((function(){return t.current}),[])}function M(e,r){return"function"==typeof e?e(r):e}function P(e,r){return D(r)?Object.assign.apply(Object,[{}].concat(Object.keys(r).sort().map((function(e){var t;return(t={})[e]=r[e],t})))):r}function j(e){return JSON.stringify(e,P)}function D(e){return e&&"object"==typeof e&&!Array.isArray(e)}function x(e,r){return e===r||typeof e==typeof r&&("object"==typeof e&&!Object.keys(r).some((function(t){return!x(e[t],r[t])})))}function k(){return"undefined"==typeof document||void 0===document.visibilityState||"visible"===document.visibilityState||"prerender"===document.visibilityState}function Q(e){if(D(e[0])){if(e[0].hasOwnProperty("queryKey")&&e[0].hasOwnProperty("queryFn")){var r=e[0],t=r.queryKey,n=r.variables,u=void 0===n?[]:n,o=r.queryFn,i=r.config;return[t,u,o,void 0===i?{}:i]}throw new Error("queryKey and queryFn keys are required.")}if("function"==typeof e[2]){var c=e[0],a=e[1],f=void 0===a?[]:a,s=e[2],l=e[3];return[c,f,s,void 0===l?{}:l]}var d=e[0],h=e[1],v=e[2];return[d,[],h,void 0===v?{}:v]}function R(r){var t=e.useRef(!1);return e[F?"useEffect":"useLayoutEffect"]((function(){return t.current=!0,function(){return t.current=!1}}),[]),e.useCallback((function(){return t.current?r.apply(void 0,arguments):void 0}),[r])}function A(e){if((e.config.suspense||e.config.useErrorBoundary)&&"error"===e.status)throw setTimeout((function(){e.query.state.status="loading"})),e.error;if(e.config.suspense&&"loading"===e.status)throw e.query.wasSuspended=!0,e.refetch()}var K=e.createContext(),H={retry:3,retryDelay:function(e){return Math.min(1e3*Math.pow(2,e),3e4)},staleTime:0,cacheTime:3e5,refetchAllOnWindowFocus:!0,refetchInterval:!1,suspense:!1,queryKeySerializerFn:function e(r){if(!r)return[];if("function"==typeof r)try{return e(r())}catch(e){return[]}"string"==typeof r&&(r=[r]);var t=j(r);return r=JSON.parse(t),[t,r]},queryFnParamsFilter:function(e){return e},throwOnError:!1,useErrorBoundary:void 0,onMutate:O,onSuccess:O,onError:O,onSettled:O,refetchOnMount:!0,isDataEqual:function e(r,t){if(r===t)return!0;if(r&&t&&"object"==typeof r&&"object"==typeof t){var n,u,o;if(Array.isArray(r)){if((n=r.length)!=t.length)return!1;for(u=n;0!=u--;)if(!e(r[u],t[u]))return!1;return!0}if(r.valueOf!==Object.prototype.valueOf)return r.valueOf()===t.valueOf();if((n=(o=Object.keys(r)).length)!==Object.keys(t).length)return!1;for(u=n;0!=u--;)if(!Object.prototype.hasOwnProperty.call(t,o[u]))return!1;for(u=n;0!=u--;){var i=o[u];if(!e(r[i],t[i]))return!1}return!0}return r!=r&&t!=t}},B={current:H};function V(){return e.useContext(K)||B.current}function L(t){var n=t.config,u=t.children,o=e.useContext(K),i=e.useMemo((function(){var e=r({},o||B.current,{},n);return void 0===e.useErrorBoundary&&(e.useErrorBoundary=e.suspense),e}),[n,o]);return e.useEffect((function(){return function(){B.current=r({},o||H),void 0===B.current.useErrorBoundary&&(B.current.useErrorBoundary=B.current.suspense)}}),[o]),o||(B.current=i),e.createElement(K.Provider,{value:i},u)}var _=te(),G=e.createContext(_),W=[_];function z(){return e.useContext(G)}function U(r){var t=r.queryCache,n=r.children,u=e.useMemo((function(){return t||te()}),[t]);return e.useEffect((function(){return W.push(u),function(){var e=W.indexOf(u);e>=0&&W.splice(e,1),null==t&&u.clear()}}),[u,t]),e.createElement(G.Provider,{value:u},n)}var J={},N={},X={},Y={},Z={},$={},ee={},re={};function te(){var e=[],n={queries:{},isFetching:0},u=function(){n.isFetching=Object.values(n.queries).reduce((function(e,r){return r.state.isFetching?e+1:e}),0),e.forEach((function(e){return e(n)}))};n.subscribe=function(r){return e.push(r),function(){e.splice(e.indexOf(r),1)}},n.clear=function(){Object.values(n.queries).forEach((function(e){return e.clear()})),n.queries={},u()};var o=function(e,r){var t=(void 0===r?{}:r).exact;if("function"!=typeof e){var u=B.current.queryKeySerializerFn(e),o=u[0],i=u[1];e=function(e){return t?e.queryHash===o:x(e.queryKey,i)}}return Object.values(n.queries).filter(e)};return n.getQueries=o,n.getQuery=function(e){return o(e,{exact:!0})[0]},n.getQueryData=function(e){var r;return null==(r=n.getQuery(e))?void 0:r.state.data},n.removeQueries=function(e,r){var t=(void 0===r?{}:r).exact,i=o(e,{exact:t});i.forEach((function(e){clearTimeout(e.staleTimeout),delete n.queries[e.queryHash]})),i.length&&u()},n.cancelQueries=function(e,r){var t=(void 0===r?{}:r).exact,n=o(e,{exact:t});n.forEach((function(e){e.cancel()})),n.length&&u()},n.refetchQueries=i((function(e,r){var t=void 0===r?{}:r,u=t.exact,i=t.throwOnError,a=t.force,f=!0===e?Object.values(n.queries):o(e,{exact:u});return h((function(){return c(Promise.all(f.map((function(e){return e.fetch({force:a})}))))}),(function(e){if(i)throw e}))})),n._buildQuery=function(e,t,o,a){var f=a.queryKeySerializerFn(e),s=f[0],d=f[1],v=n.queries[s];return v?(Object.assign(v,{queryVariables:t,queryFn:o}),v.config=r({},v.config,{},a)):(v=function(e){var t=e.cache,o=e.config.queryReducer||ne,a=void 0===e.queryHash,f="function"==typeof e.config.initialData?e.config.initialData():e.config.initialData,s=void 0!==f,d=!!a||!s,v=e.config.manual,y=r({},e,{instances:[],state:o(void 0,{type:J,initialStatus:a||v||s?"success":"loading",initialData:f,hasInitialData:s,isStale:d,manual:v})}),p=function(e){y.state=o(y.state,e),y.instances.forEach((function(e){return e.onStateUpdate(y.state)})),u()};y.scheduleStaleTimeout=function(){y.config.staleTime!==1/0&&(y.staleTimeout=setTimeout((function(){t.getQuery(y.queryKey)&&p({type:X})}),y.config.staleTime))},y.scheduleGarbageCollection=function(){y.config.cacheTime!==1/0&&(p({type:Y}),y.cacheTimeout=setTimeout((function(){n.removeQueries((function(e){return e.state.markedForGarbageCollection&&e.queryHash===y.queryHash}))}),void 0===y.state.data&&"error"!==y.state.status?0:y.config.cacheTime))},y.heal=function(){clearTimeout(y.cacheTimeout),y.cancelled=null},y.cancel=function(){y.cancelled=E,y.cancelPromises&&y.cancelPromises(),delete y.promise,u()},y.updateInstance=function(e){var t=y.instances.find((function(r){return r.id===e.id}));t?Object.assign(t,e):(t=r({onStateUpdate:O},e),y.instances.push(e))},y.subscribe=function(e){return y.heal(),function(){y.instances=y.instances.filter((function(r){return r.id!==e})),y.instances.length||(y.cancel(),y.scheduleGarbageCollection())}};var g=i((function(e){for(var r=arguments.length,t=new Array(r>1?r-1:0),n=1;n<r;n++)t[n-1]=arguments[n];return h((function(){var r=e.apply(void 0,y.config.queryFnParamsFilter(t));return y.cancelPromises=function(){return null==r.cancel?void 0:r.cancel()},c(r,(function(e){if(delete y.cancelPromises,y.cancelled)throw y.cancelled;return e}))}),(function(r){var n=!1;if(delete y.cancelPromises,y.cancelled)throw y.cancelled;return p({type:N}),l((function(){if(!0===y.config.retry||y.state.failureCount<=y.config.retry||"function"==typeof y.config.retry&&y.config.retry(y.state.failureCount,r)){if(!k())return y.shouldContinueRetryOnFocus=!0,n=!0,new Promise(O);delete y.shouldContinueRetryOnFocus;var u=M(y.config.retryDelay,y.state.failureCount);return n=!0,c(new Promise((function(r,n){setTimeout(i((function(){return y.cancelled?n(y.cancelled):h((function(){return c(g.apply(void 0,[e].concat(t)),(function(e){if(y.cancelled)return n(y.cancelled);r(e)}))}),(function(e){if(y.cancelled)return n(y.cancelled);n(e)}))})),u)})))}}),(function(e){if(n)return e;throw r}))}))}));return y.fetch=i((function(e){var r=void 0===e?{}:e,t=r.force,n=r.__queryFn,u=void 0===n?y.queryFn:n;if(y.queryHash&&(y.state.isStale||t))return y.promise||(y.promise=i((function(){y.cancelled=null;var e=[].concat(y.instances);return y.wasSuspended&&e.unshift(y.suspenseInstance),h((function(){return p({type:Z}),c(g.apply(void 0,[u].concat(y.queryKey,y.queryVariables)),(function(r){return y.setData((function(e){return y.config.isDataEqual(e,r)?e:r})),e.forEach((function(e){return e.onSuccess&&e.onSuccess(y.state.data)})),e.forEach((function(e){return e.onSettled&&e.onSettled(y.state.data,null)})),delete y.promise,r}))}),(function(r){if(p({type:ee,cancelled:r===y.cancelled,error:r}),delete y.promise,r!==y.cancelled)throw e.forEach((function(e){return e.onError&&e.onError(r)})),e.forEach((function(e){return e.onSettled&&e.onSettled(void 0,r)})),r}))}))()),y.promise})),y.setState=function(e){return p({type:re,updater:e})},y.setData=function(e){p({type:$,updater:e}),clearTimeout(y.staleTimeout),y.scheduleStaleTimeout()},y.clear=function(){clearTimeout(y.staleTimeout),clearTimeout(y.cacheTimeout),y.cancel()},y}({cache:n,queryKey:d,queryHash:s,queryVariables:t,queryFn:o,config:a}),!F&&v.state.data&&(v.scheduleStaleTimeout(),v.heal(),v.scheduleGarbageCollection()),v.queryHash&&(F||(n.queries[s]=v,setTimeout((function(){u()}))))),v},n.prefetchQuery=i((function(){for(var e=!1,u=arguments.length,o=new Array(u),i=0;i<u;i++)o[i]=arguments[i];var a=Q(o),f=a[0],s=a[1],d=a[2],v=a[3],y=v.force,p=t(v,["force"]);p=r({},B.current,{},p);var g=n._buildQuery(f,s,d,p);return l((function(){if(g.state.isStale||y)return h((function(){return c(g.fetch({force:y}),(function(r){return g.wasPrefetched=!0,e=!0,r}))}),(function(e){if(p.throwOnError)throw e}))}),(function(r){return e?r:g.state.data}))})),n.setQueryData=function(e,u,i){void 0===i&&(i={});var c=i,a=c.exact,f=t(c,["exact"]),s=o(e,{exact:a});s.length||"function"==typeof e||(s=[n._buildQuery(e,void 0,(function(){return new Promise(O)}),r({},B.current,{},f))]),s.forEach((function(e){return e.setData(u)}))},n}function ne(e,t){switch(t.type){case J:return{status:t.initialStatus,error:null,isFetching:!t.hasInitialData&&!t.manual&&"loading"===t.initialStatus,canFetchMore:!1,failureCount:0,isStale:t.isStale,markedForGarbageCollection:!1,data:t.initialData,updatedAt:t.hasInitialData?Date.now():0};case N:return r({},e,{failureCount:e.failureCount+1});case X:return r({},e,{isStale:!0});case Y:return r({},e,{markedForGarbageCollection:!0});case Z:return r({},e,{status:"error"===e.status?"loading":e.status,isFetching:!0,failureCount:0});case $:return r({},e,{status:"success",data:M(t.updater,e.data),error:null,isStale:!1,isFetching:!1,canFetchMore:t.canFetchMore,updatedAt:Date.now(),failureCount:0});case ee:return r({},e,{isFetching:!1,isStale:!0},!t.cancelled&&{status:"error",error:t.error});case re:return M(t.updater,e);default:throw new Error}}var ue,oe=function(){var e=B.current.refetchAllOnWindowFocus;k()&&(void 0===navigator.onLine||navigator.onLine)&&W.forEach((function(r){return r.refetchQueries((function(r){return!!r.instances.length&&(!0!==r.config.manual&&(r.shouldContinueRetryOnFocus?(delete r.promise,!0):void 0===r.config.refetchOnWindowFocus?e:r.config.refetchOnWindowFocus))})).catch(I.error)}))};function ie(e){ue&&ue(),ue=e(oe)}function ce(){var r=z(),t=e.useState({}),n=t[0],u=t[1];return e.useEffect((function(){return r.subscribe((function(){return u({})}))}),[]),e.useMemo((function(){return n&&r.isFetching}),[n])}ie((function(e){var r;if(!F&&(null==(r=window)?void 0:r.addEventListener))return window.addEventListener("visibilitychange",e,!1),window.addEventListener("focus",e,!1),function(){window.removeEventListener("visibilitychange",e),window.removeEventListener("focus",e)}}));var ae=function(){return{status:"idle",data:void 0,error:null}},fe={},se={},le={},de={};function he(e,r){if(r.type===fe)return{status:"idle",data:void 0,error:null};if(r.type===se)return{status:"loading"};if(r.type===le)return{status:"success",data:r.data};if(r.type===de)return{status:"error",error:r.error};throw new Error}function ve(t,n){void 0===n&&(n={});var u=e.useReducer(he,null,ae),o=u[0],f=R(u[1]),s=T(t),d=T(r({},V(),{},n)),v=e.useRef(),y=e.useCallback(i((function(e,r){var t=void 0===r?{}:r,n=t.onSuccess,u=void 0===n?O:n,o=t.onError,i=void 0===o?O:o,y=t.onSettled,p=void 0===y?O:y,g=t.throwOnError,m=d(),b=S();v.current=b;var w,q=function(){return v.current===b};return f({type:se}),h((function(){return c(m.onMutate(e),(function(r){var t;return w=r,l((function(){if(q())return c(s()(e),(function(e){t=e}))}),(function(){return l((function(){if(q())return a(u(t,e))}),(function(){return l((function(){if(q())return a(m.onSuccess(t,e))}),(function(){return l((function(){if(q())return a(p(t,null,e))}),(function(){return l((function(){if(q())return a(m.onSettled(t,null,e))}),(function(){return q()&&f({type:le,data:t}),t}))}))}))}))}))}))}),(function(r){return l((function(){if(q())return I.error(r),a(i(r,e,w))}),(function(){return l((function(){if(q())return a(m.onError(r,e,w))}),(function(){return l((function(){if(q())return a(p(void 0,r,e,w))}),(function(){return l((function(){if(q())return a(m.onSettled(void 0,r,e,w))}),(function(){if(q()&&(f({type:de,error:r}),null!=g?g:m.throwOnError))throw r}))}))}))}))}))})),[f,d,s]),p=e.useCallback((function(){return f({type:fe})}),[f]);return e.useEffect((function(){if(d().useErrorBoundary&&o.error)throw o.error}),[d,o.error]),[y,r({},o,{reset:p})]}function ye(n,u,o,a){void 0===a&&(a={});var f,s=(null===(f=e.useRef(null)).current&&(f.current=S()),f.current);a=r({},V(),{},a);var l=z(),d=e.useRef(),v=l._buildQuery(n,u,o,a);d.current&&void 0===d.current.queryHash&&void 0===v.queryHash||(d.current=v);var y=d.current,p=R(e.useState()[1]),g=T(a),m=e.useCallback(i((function(e){void 0===e&&(e={});var r=e,n=r.throwOnError,u=t(r,["throwOnError"]);return h((function(){return c(y.fetch(u))}),(function(e){if(n)throw e}))})),[y]);return y.suspenseInstance={onSuccess:function(e){return g().onSuccess(e)},onError:function(e){return g().onError(e)},onSettled:function(e,r){return g().onSettled(e,r)}},e.useEffect((function(){return y.updateInstance({id:s,onStateUpdate:function(){return p({})},onSuccess:function(e){return g().onSuccess(e)},onError:function(e){return g().onError(e)},onSettled:function(e,r){return g().onSettled(e,r)}}),y.subscribe(s)}),[g,s,y,p]),e.useEffect((function(){g().manual||y.wasPrefetched||y.wasSuspended||!y.state.isStale||!g().refetchOnMount&&1!==y.instances.length||m().catch(I.error),y.wasPrefetched=!1,y.wasSuspended=!1}),[g,y,m]),e.useEffect((function(){var e=d.current;if(a.refetchInterval&&(!e.currentRefetchInterval||a.refetchInterval<e.currentRefetchInterval))return e.currentRefetchInterval=a.refetchInterval,clearInterval(e.refetchIntervalId),e.refetchIntervalId=setInterval((function(){(k()||a.refetchIntervalInBackground)&&m().catch(I.error)}),a.refetchInterval),function(){clearInterval(e.refetchIntervalId),delete e.refetchIntervalId,delete e.currentRefetchInterval}}),[a.refetchInterval,a.refetchIntervalInBackground,m]),r({},y.state,{config:a,query:y,refetch:m})}function pe(){for(var e=arguments.length,r=new Array(e),t=0;t<e;t++)r[t]=arguments[t];var n=ye.apply(void 0,Q(r));return A(n),n}function ge(){for(var t=arguments.length,n=new Array(t),u=0;u<t;u++)n[u]=arguments[u];var o=Q(n),i=o[0],c=o[1],a=o[2],f=o[3],s=void 0===f?{}:f,l=e.useRef();i||(l.current=void 0),void 0!==l.current&&delete s.initialData;var d=ye(i,c,a,s),h=d.data,v=d.status;e.useEffect((function(){"success"===v&&void 0!==h&&(l.current=h)}),[h,v]);var y=h;void 0===y&&(y=l.current),void 0!==y&&(v="success");var p=r({},d,{resolvedData:y,latestData:h,status:v});return A(p),p}function me(){for(var t=e.useRef(),n=arguments.length,u=new Array(n),o=0;o<n;o++)u[o]=arguments[o];var a=Q(u),l=a[0],h=a[1],p=a[2],g=a[3],m=void 0===g?{}:g,b=m.getFetchMore,w=T(b),q=p,S=ye(l,h,p=i((function(){var e=!1,r=[],n=[].concat(t.current.query.pageVariables),u=[];return f(s((function(){var t=n.shift();return d((function(){if(r.length){var n=w()(r[r.length-1],r);if(!n)return void(e=!0);var o=[].concat(t.slice(0,-1),[n]),i=r.push;return c(q.apply(void 0,o),(function(e){i.call(r,e),u.push(o)}))}var a=r.push;return c(q.apply(void 0,t),(function(e){a.call(r,e),u.push(t)}))}))}),(function(){return!e&&!!n.length})),(function(){return t.current.query.canFetchMore=w()(r[r.length-1],r),t.current.query.pageVariables=u,r}))})),m);void 0===S.query.canFetchMore&&void 0!==S.data&&(S.query.canFetchMore=w()(S.data[S.data.length-1],S.data)),t.current=S;var E=S.refetch,F=S.data,O=void 0===F?[]:F,I=S.query.canFetchMore;S.query.pageVariables||(S.query.pageVariables=[[].concat(S.query.queryKey,S.query.queryVariables)]);var C=e.useCallback((function(e){return void 0===e&&(e=t.current.query.canFetchMore),t.current.query.canFetchMore?E({force:!0,__queryFn:i((function(){for(var n=arguments.length,u=new Array(n),o=0;o<n;o++)u[o]=arguments[o];return v((function(){t.current.query.setState((function(e){return r({},e,{isFetchingMore:!0})}));var n=[].concat(u,[e]);t.current.query.pageVariables.push(n);var o=t.current.data;return c(q.apply(void 0,n),(function(e){var r=[].concat(o,[e]);return t.current.query.canFetchMore=w()(r[r.length-1],r),r}))}),(function(e,n){return t.current.query.setState((function(e){return r({},e,{isFetchingMore:!1})})),y(e,n)}))}))}):void 0}),[w,q,E]);return A(S),r({},S,{data:O,canFetchMore:I,fetchMore:C})}export{U as ReactQueryCacheProvider,L as ReactQueryConfigProvider,x as deepIncludes,te as makeQueryCache,_ as queryCache,C as setConsole,ie as setFocusHandler,j as stableStringify,b as statusError,g as statusIdle,m as statusLoading,w as statusSuccess,me as useInfiniteQuery,ce as useIsFetching,ve as useMutation,ge as usePaginatedQuery,pe as useQuery,z as useQueryCache};
//# sourceMappingURL=react-query.min.mjs.map
