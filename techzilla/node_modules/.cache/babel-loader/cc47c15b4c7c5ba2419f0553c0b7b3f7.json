{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\User\\\\forum-app-react-query\\\\src\\\\components\\\\Comments\\\\index.js\";\nimport React, { useState } from 'react';\nimport { Box, Heading, Flex, Textarea, Button, List, ListItem, Spinner } from '@chakra-ui/core';\nimport useComments from '../../hooks/useComments';\nimport { useMutation, queryCache } from 'react-query';\nimport Axios from 'axios';\n\nconst Comments = ({\n  postId\n}) => {\n  const {\n    status,\n    error,\n    data,\n    isFetching,\n    isStale\n  } = useComments(postId);\n  const [comment, setComment] = useState('');\n  const [mutate] = useMutation(values => {\n    Axios.post('http://localhost:3000/comments', values);\n  }, {\n    onSuccess: () => {\n      queryCache.refetchQueries('comments');\n    }\n  });\n\n  const onAddComment = async () => {\n    await mutate({\n      body: comment,\n      postId: postId\n    });\n    setComment('');\n  };\n\n  return /*#__PURE__*/React.createElement(Box, {\n    boxShadow: '0 2px 10px 0 rgba(0, 0, 0, 0.08)',\n    borderRadius: \"5px\",\n    marginTop: \"10px\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 41,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Heading, {\n    as: \"h4\",\n    margin: \"5px\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 46,\n      columnNumber: 7\n    }\n  }, \"Comments\"), /*#__PURE__*/React.createElement(Flex, {\n    flexDirection: \"column\",\n    padding: \"20px\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Textarea, {\n    maxW: \"1020px\",\n    resize: \"none\",\n    boxSizing: \"border-box\",\n    m: \"10px\",\n    value: comment,\n    onChange: e => setComment(e.target.value),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(Button, {\n    variantColor: \"blue\",\n    m: \"10px\",\n    onClick: onAddComment,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 9\n    }\n  }, \"Post Comment\")), /*#__PURE__*/React.createElement(\"hr\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(Flex, {\n    flexDirection: \"column\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 7\n    }\n  }, status === 'loading' ? /*#__PURE__*/React.createElement(Box, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(Spinner, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 13\n    }\n  })) : status === 'error' ? /*#__PURE__*/React.createElement(Box, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 11\n    }\n  }, \"Error\") : /*#__PURE__*/React.createElement(List, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 11\n    }\n  }, data.map((comment, index) => {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"Comment-item\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 22\n      }\n    }, /*#__PURE__*/React.createElement(ListItem, {\n      key: index,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 17\n      }\n    }, comment.body), /*#__PURE__*/React.createElement(\"p\", {\n      className: \"Comment-item__author\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 17\n      }\n    }, \"Author\")));\n  }))));\n};\n\nexport default Comments;","map":{"version":3,"sources":["C:/Users/User/forum-app-react-query/src/components/Comments/index.js"],"names":["React","useState","Box","Heading","Flex","Textarea","Button","List","ListItem","Spinner","useComments","useMutation","queryCache","Axios","Comments","postId","status","error","data","isFetching","isStale","comment","setComment","mutate","values","post","onSuccess","refetchQueries","onAddComment","body","e","target","value","map","index"],"mappings":"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","sourcesContent":["import React, { useState } from 'react';\r\nimport {\r\n  Box,\r\n  Heading,\r\n  Flex,\r\n  Textarea,\r\n  Button,\r\n  List,\r\n  ListItem,\r\n  Spinner,\r\n} from '@chakra-ui/core';\r\nimport useComments from '../../hooks/useComments';\r\nimport { useMutation, queryCache } from 'react-query';\r\nimport Axios from 'axios';\r\nconst Comments = ({ postId }) => {\r\n  const { status, error, data, isFetching, isStale } = useComments(postId);\r\n\r\n  const [comment, setComment] = useState('');\r\n\r\n  const [mutate] = useMutation(\r\n    (values) => {\r\n      Axios.post('http://localhost:3000/comments', values);\r\n    },\r\n    {\r\n      onSuccess: () => {\r\n        queryCache.refetchQueries('comments');\r\n      },\r\n    }\r\n  );\r\n\r\n  const onAddComment = async () => {\r\n    await mutate({\r\n      body: comment,\r\n      postId: postId,\r\n    });\r\n\r\n    setComment('');\r\n  };\r\n\r\n  return (\r\n    <Box\r\n      boxShadow={'0 2px 10px 0 rgba(0, 0, 0, 0.08)'}\r\n      borderRadius=\"5px\"\r\n      marginTop=\"10px\"\r\n    >\r\n      <Heading as=\"h4\" margin=\"5px\">\r\n        Comments\r\n      </Heading>\r\n      <Flex flexDirection=\"column\" padding=\"20px\">\r\n        <Textarea\r\n          maxW=\"1020px\"\r\n          resize=\"none\"\r\n          boxSizing=\"border-box\"\r\n          m=\"10px\"\r\n          value={comment}\r\n          onChange={(e) => setComment(e.target.value)}\r\n        />\r\n        <Button variantColor=\"blue\" m=\"10px\" onClick={onAddComment}>\r\n          Post Comment\r\n        </Button>\r\n      </Flex>\r\n\r\n      <hr />\r\n\r\n      <Flex flexDirection=\"column\">\r\n        {status === 'loading' ? (\r\n          <Box>\r\n            <Spinner />\r\n          </Box>\r\n        ) : status === 'error' ? (\r\n          <Box>Error</Box>\r\n        ) : (\r\n          <List>\r\n            {data.map((comment, index) => {\r\n              return <div className=\"Comment-item\">\r\n                <ListItem key={index}>\r\n                <p>{comment.body}</p>\r\n                <p className=\"Comment-item__author\">Author</p>\r\n               \r\n                \r\n                </ListItem>\r\n                </div>;\r\n            })}\r\n          </List>\r\n        )}\r\n      </Flex>\r\n    </Box>\r\n  );\r\n};\r\n\r\nexport default Comments;\r\n"]},"metadata":{},"sourceType":"module"}